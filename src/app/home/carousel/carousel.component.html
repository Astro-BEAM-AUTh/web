<div class="carousel-wrapper" 
     (touchstart)="onTouchStart($event)" 
     (touchmove)="onTouchMove($event)"
     (touchend)="onTouchEnd($event)"
     (mousedown)="onMouseDown($event)"
     (mousemove)="onMouseMove($event)"
     (mouseup)="onMouseUp($event)"
     (mouseleave)="onMouseLeave()">
    <!-- Carousel slides -->
    <div class="carousel" 
         [class.dragging]="isDragging"
         [style.transform]="getCarouselTransform()">
        @for (slide of slides; track slide.id) {
            <app-carousel-slide 
                [imageUrl]="slide.imageUrl"
                [backgroundColor]="slide.backgroundColor"
                [title]="slide.title"
                [subtitle]="slide.subtitle"
                [overlayOpacity]="slide.overlayOpacity || 0.5">
                
                <!-- Optional buttons for this slide -->
                @if (slide.buttons && slide.buttons.length > 0) {
                    <div class="slide-button-group">
                        @for (button of slide.buttons; track button.text) {
                            @if (button.routerLink) {
                                <a mat-raised-button 
                                   [routerLink]="button.routerLink"
                                   class="slide-button">
                                    {{ button.text }}
                                </a>
                            } @else {
                                <button mat-raised-button 
                                        (click)="button.action?.()"
                                        class="slide-button">
                                    {{ button.text }}
                                </button>
                            }
                        }
                    </div>
                }
            </app-carousel-slide>
        }
    </div>

    <!-- Navigation arrows -->
    <button class="carousel-arrow carousel-arrow-left" (click)="previousSlide()" aria-label="Previous slide">
        ‹
    </button>
    <button class="carousel-arrow carousel-arrow-right" (click)="nextSlide()" aria-label="Next slide">
        ›
    </button>

    <!-- Dots indicators -->
    <div class="carousel-indicators">
        @for (slide of slides; track slide.id; let i = $index) {
            <button 
                class="carousel-dot" 
                [class.active]="i === currentSlide"
                (click)="goToSlide(i)"
                [attr.aria-label]="'Go to slide ' + (i + 1)">
            </button>
        }
    </div>
</div>